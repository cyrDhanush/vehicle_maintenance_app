"use strict";function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function _slicedToArray(a,b){return _arrayWithHoles(a)||_iterableToArrayLimit(a,b)||_unsupportedIterableToArray(a,b)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(a,b){if(a){if("string"==typeof a)return _arrayLikeToArray(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);return"Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c?Array.from(a):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?_arrayLikeToArray(a,b):void 0}}function _arrayLikeToArray(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}function _iterableToArrayLimit(a,b){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(a)){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!(b&&c.length===b));d=!0);}catch(a){e=!0,f=a}finally{try{d||null==h["return"]||h["return"]()}finally{if(e)throw f}}return c}}function _arrayWithHoles(a){if(Array.isArray(a))return a}(function(){var a,b=function(a){a=a.replace(/[[\]]/g,"\\$&");var b=new RegExp("[?&]"+a+"(=([^&#]*)|&|#|$)"),c=b.exec(window.location.href);return c?c[2]?decodeURIComponent(c[2].replace(/\+/g," ")):"":null},c=null!==b("enable-storage-consent-logger"),d=function(a){for(var b,d=arguments.length,e=Array(1<d?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];return c?(b=console).log.apply(b,["[storage-consent] ".concat(a)].concat(e)):void 0},e=window.forceStorageConsentScript||null!==b("force-storage-consent-script"),f=b("override-storage-consent-domain");if(window.__storageConsentAdded)return void d("Library already initialized.");window.__storageConsentAdded=!0,"function"!=typeof Object.assign&&(Object.assign=function(a){if(null==a)throw new TypeError("Cannot convert undefined or null to object");for(var b,c=Object(a),d=1;d<arguments.length;d++)if(b=arguments[d],null!=b)for(var f in b)b.hasOwnProperty(f)&&(c[f]=b[f]);return c}),"function"!=typeof Object.entries&&(Object.entries=function(a){for(var b=Object.keys(a),c=b.length,d=Array(c);c--;)d[c]=[b[c],a[b[c]]];return d}),Array.prototype.includes||(Array.prototype.includes=function(a){if(null==this)throw new TypeError("Array.prototype.includes called on null or undefined");var b=Object(this),c=parseInt(b.length,10)||0;if(0===c)return!1;var d,e,f=parseInt(arguments[1],10)||0;for(0<=f?d=f:0>(d=c+f)&&(d=0);d<c;){if(a===(e=b[d])||a!=a&&e!=e)return!0;d++}return!1});var g,h,i=function(a){return-1<document.cookie.indexOf(a)},j=function(a){return(document.cookie.match(new RegExp("(^| )".concat(a,"=([^;]+)")))||[])[2]},k=function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:365,e=new Date;e.setTime(e.getTime()+1e3*(60*(60*(24*c)))),document.cookie="".concat(a,"=").concat(b,";expires=").concat(e.toUTCString(),";path=/")},l=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return Object.entries(a).map(function(a){var b=_slicedToArray(a,2),c=b[0],d=b[1];return"".concat(encodeURIComponent(c),"=").concat(encodeURIComponent(d))}).join("&")},m=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return a.split("&").reduce(function(a,b){var c=b.split("="),d=_slicedToArray(c,2),e=d[0],f=d[1];return a[decodeURIComponent(e)]=decodeURIComponent(f),a},{})},n={STRICTLY_NECESSARY_COOKIES:"C0001",PERFORMANCE_COOKIES:"C0002",FUNCTIONAL_COOKIES:"C0003",TARGETING_COOKIES:"C0004",SOCIAL_MEDIA_COOKIES:"C0005"},o={REQUIRED:1,FUNCTIONAL:2,ADVERTISING:3},p=(a={},_defineProperty(a,o.REQUIRED,[n.STRICTLY_NECESSARY_COOKIES]),_defineProperty(a,o.FUNCTIONAL,[n.PERFORMANCE_COOKIES,n.FUNCTIONAL_COOKIES]),_defineProperty(a,o.ADVERTISING,[n.TARGETING_COOKIES,n.SOCIAL_MEDIA_COOKIES]),a),q={"clearbrain.com":o.FUNCTIONAL,"facebook.com":o.ADVERTISING,"atdmt.com":o.ADVERTISING,"marketo.com":o.FUNCTIONAL,"google-analytics.com:":o.FUNCTIONAL,"hubspot.com":o.FUNCTIONAL,"madkuku.com":o.ADVERTISING,"twitter.com":o.ADVERTISING,"pendo.com":o.FUNCTIONAL,"hotjar.com":o.FUNCTIONAL,"amplitude.com":o.REQUIRED,"atlassian.net":o.REQUIRED,"bizible.com":o.FUNCTIONAL,"braze.com":o.FUNCTIONAL,"bugsnag.com":o.REQUIRED,"codepen.io":o.REQUIRED,"googleapis.com":o.REQUIRED,"google.com":o.REQUIRED,"googletagmanager.com":o.ADVERTISING,"launchdarkly.com":o.REQUIRED,"linkedin.com":o.ADVERTISING,"bizographics.com":o.ADVERTISING,"newrelic.com":o.REQUIRED,"pusher.com":o.REQUIRED,"pusherapp.com":o.REQUIRED,"segment.com":o.REQUIRED,"typekit.net":o.REQUIRED,"vimeo.com":o.REQUIRED,"webobserver.io":o.FUNCTIONAL,"wistia.com":o.REQUIRED,"wistia.net":o.REQUIRED,"youtube.com":o.REQUIRED,"zendesk.com":o.FUNCTIONAL,"zuora.com":o.REQUIRED},r="inv-storage-consent",s=!1;try{if(!e)if(h=m(j(r)).consentModel,d("Consent model from the storage-consent cookie: ",h),h){var t="notice only"===h,u=i("OptanonAlertBoxClosed");if(d("Is the consent model notice only?",t),d("Was the alert box closed?",u),t||u){d("We should be able to skip the OneTrust script. Validating the \"OptanonConsent\" cookie...");var v=m(j("OptanonConsent")),w=v.groups,x=void 0===w?"":w,y=x.split(",").filter(function(a){return"1"===a.split(":")[1]}).map(function(a){return a.split(":")[0]});y.includes(n.STRICTLY_NECESSARY_COOKIES)?(d("The \"OptanonConsent\" cookie was validated successfully and we can skip the OneTrust script. Consented categories from the cookie:",y),g=y,s=!0):d("The \"OptanonConsent\" cookie was not valid. Consented categories from the cookie:",y)}}else d("No storage-consent cookie with a valid consent model has been found so we will run the OneTrust script.")}catch(a){console.error("Storage Consent - Unable to check if we can skip the OneTrust script initialization")}var z,A,B=top&&self&&top!==self,C=B||["invisionapp_ima","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_5) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/43.0.2357.65 Mobile Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_6) AppleWebKit/605.1.15 (KHTML, like Gecko) Chrome/76.0.3809.132 Mobile Safari/605.1.15","InVisionStudio","WebView"].some(function(a){return-1<window.navigator.userAgent.toLowerCase().indexOf(a.toLowerCase())})||[/(IMA|IMI|IFI|CraftManager|InVisionStudio|Conv|FreehandTeams)(\s|\/)/gi,/(iPhone|iPod|iPad)(?!.*Safari)/gi,/Android.*(wv|\.0\.0\.0)/gi,/Linux; U; Android/gi].some(function(a){return a.test(window.navigator.userAgent)}),D={test:"https://cdn.cookielaw.org/scripttemplates/otSDKStub.js?cachebust=".concat(Date.now()),prod:"https://cdn.cookielaw.org/scripttemplates/otSDKStub.js"},E={"designbetter.co":{test:"a15010c1-60be-42de-9ea7-ebb81d957e48-test",prod:"a15010c1-60be-42de-9ea7-ebb81d957e48"},"designdisruptors.com":{test:"5ad0f30b-3ec6-4887-8600-a377c9bc71cb-test",prod:"5ad0f30b-3ec6-4887-8600-a377c9bc71cb"},"invisionapp.com":{test:"d0d9132f-a6e0-4094-81da-798f2d0285d2-test",prod:"d0d9132f-a6e0-4094-81da-798f2d0285d2"},"invisionbeta.com":{test:"d0d9132f-a6e0-4094-81da-798f2d0285d2-test",prod:"d0d9132f-a6e0-4094-81da-798f2d0285d2-test"},"muz.li":{test:"7a37cfa3-f3ec-488e-8770-a46d01ff098a-test",prod:"7a37cfa3-f3ec-488e-8770-a46d01ff098a"},"switchtosketchapp.com":{test:"022a63af-f511-4079-bb8d-5ce5f524184e-test",prod:"022a63af-f511-4079-bb8d-5ce5f524184e"},"wake.com":{test:"6087eb17-e962-403c-a83d-ef62bbec6fec-test",prod:"6087eb17-e962-403c-a83d-ef62bbec6fec"}},F=!1;if(f)d("Overriding the domain with \"".concat(f,"\"")),z=f,A="test";else{A=window.inGlobalContext&&window.inGlobalContext.appMetaData&&"testing"===window.inGlobalContext.appMetaData.tier?"test":"prod";var V=window.location.hostname||"";z=V.substring(V.lastIndexOf(".",V.lastIndexOf(".")-1)+1)}var G=D[A],H=E[z]&&E[z][A];if(H||(console.warn("Storage-Consent - Cannot find a valid script domain ID for \"".concat(z,"\" - Skipping OneTrust script injection set Storage-Consent to ready immediately")),s=!0),!s&&G&&H){d("Running the OneTrust script...");var W=document.createElement("script");W.src=G,W.setAttribute("data-domain-script",H),W.async=!0,(document.body||document.head).appendChild(W),window.OptanonWrapper=function(){if(C){d("OneTrust banner was forced to hide because we're in an embedded context.");var a=document.querySelector("#onetrust-consent-sdk");a&&(a.style.display="none")}if(s=!0,g=(window.OnetrustActiveGroups||"").split(",").filter(function(a){return!!a}),!F){d("OneTrust is ready.");try{J.forEach(function(a){return a()})}catch(a){console.error("StorageContent - error while running the consent level ready callbacks",a)}F=!0;var b=window.Optanon&&window.Optanon.GetDomainData&&window.Optanon.GetDomainData();h=b&&b.ConsentModel&&b.ConsentModel.Name,h&&(k(r,l({consentModel:h})),d("Created a cookie with the \"consentModel\" info."))}else{d("OneTrust consent changed.");try{L.forEach(function(a){return a()})}catch(a){console.error("StorageContent - error while running the consent level change callbacks",a)}}}}var I,J=[],K=function(a){s&&setTimeout(a,15),J.push(a)},L=[],M=function(a){var b=p[a]||[];return!!(g&&g.find(function(a){return b.includes(a)}))},N=function(){return g},O=function(){return h},P=function(){return z},Q=function(){return A},R=function(){return h&&"notice only"!==h},S=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};window.rum&&window.rum.markCustomEvent?window.rum.markCustomEvent("StorageConsentDeprecationReport",a):window.newrelic&&window.newrelic.addPageAction?window.newrelic.addPageAction("StorageConsentDeprecationReport",a):window.DD_RUM&&window.DD_RUM.addAction&&window.DD_RUM.addAction("StorageConsentDeprecationReport",a),console.error("The \"StorageContent.".concat(a.apiName,"\" API is deprecated and should not be used anymore. Please check the Storage Content documentation to see what APIs you can use instead (https://github.com/InVisionApp/storage-consent)."))},T=function(a){S({apiName:"consentedToDomain",hostname:a});var b=M(o.FUNCTIONAL);a&&-1<a.indexOf("/")&&(!I&&(I=document.createElement("a")),I.href=a,a=I.hostname||a);var c=q[a];return c&&(b=M(c)),b},U=function(){return S({apiName:"hasGDPRCookies"}),h&&"notice only"!==h};window.StorageConsent=window.StorageConsent||{consentCategories:o,cookieCategories:n,onConsentLevelReady:K,onConsentLevelChange:function onConsentLevelChange(a){L.push(a)},consentedToCategory:M,consentedToDomain:T,canRunFunctionalScripts:function canRunFunctionalScripts(){return M(o.FUNCTIONAL)},canRunAdvertisingScripts:function canRunAdvertisingScripts(){return M(o.ADVERTISING)},hasGDPRCookies:U,showConsentPreferencesDialog:function showConsentPreferencesDialog(){return window.Optanon&&window.Optanon.ToggleInfoDisplay?void window.Optanon.ToggleInfoDisplay():void console.error("Cannot show the consent alert because the OneTrust script did not ran. To force the script to run you can either use the \"?force-script-execution\" query-param or set \"window.forceStorageConsentScript = true\" before running the StorageConsent.")},qualifiesForGDPR:R,getConsentDecisionForDomain:function getConsentDecisionForDomain(){S({apiName:"getConsentDecisionForDomain"})},getConsentDecision:function getConsentDecision(){S({apiName:"getConsentDecision"})},getGDPRConsentDecision:function getGDPRConsentDecision(){S({apiName:"getGDPRConsentDecision"})},getConsentedCategories:N,getConsentCategories:function getConsentCategories(){return S({apiName:"getConsentCategories"}),N()},getConsentModel:O,getScriptDomain:P,getScriptEnvironment:Q}})();